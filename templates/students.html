{% extends 'base.html' %}
{% block content %}
<h2 id="students-list-heading">Students in {{ class_.name }}</h2>
<a href="{{ url_for('add_student', class_id=class_.id) }}" class="btn btn-success mb-3" aria-label="Add New Student">Add
    New Student</a>
<table class="table table-bordered" aria-describedby="students-list-heading">
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Student Number</th>
            <th scope="col">QR Code</th>
            <th scope="col">Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for student in students %}
        <tr>
            <td>{{ student.name }}</td>
            <td><span class="badge bg-primary" style="background-color:#2563eb !important; color:#fff;">{{
                    student.student_number }}</span></td>
            <td>
                {% if student.qr_code_path %}
                <img src="/{{ student.qr_code_path }}" alt="QR Code for {{ student.name }}" width="60">
                {% endif %}
            </td>
            <td>
                <div class="btn-group" role="group">
                    <a href="{{ url_for('edit_student', student_id=student.id) }}" class="btn btn-primary btn-sm"
                        aria-label="Edit {{ student.name }}">Edit</a>
                    <form action="{{ url_for('delete_student', student_id=student.id) }}" method="post" class="delete-btn-form">
                        <button type="submit" class="btn btn-danger btn-sm" aria-label="Delete {{ student.name }}"
                            onclick="return confirm('Are you sure you want to delete this student?');">Delete</button>
                    </form>
                    <a href="{{ url_for('download_qr', student_id=student.id) }}" class="btn btn-secondary btn-sm"
                        aria-label="Download QR for {{ student.name }}">Download QR</a>
                </div>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<a href="{{ url_for('view_classes') }}" class="btn btn-secondary" aria-label="Back to Classes">Back to Classes</a>
{% endblock %}